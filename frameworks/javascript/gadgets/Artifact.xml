<?xml version="1.0" encoding="UTF-8" ?>
<!--
 **
 * Created by The eXo Platform SARL
 * Author : Max Shaposhnik
 * 
 * Jan 09, 2009          
 *
-->
<Module>
	<ModulePrefs author="eXoPlatform"
		title="Artifact"
		directory_title="Artifact gadget"
		title_url="http://www.exoplatform.org"
		description="Artifact managing gadget"
		thumbnail="http://localhost:8080/eXoGadgets/skin/DefaultSkin/portletIcons/Calendar.png"
		height="335">
	</ModulePrefs>
	<Content type="html">
	<![CDATA[

<style type="text/css">

              .Content {
	        	font-family:arial;
			font-size: 12px;
		        }

            .underlined { 
                         border-bottom : 1px solid #cccccc; 
			 font-size: 12px;
                        }

              .centered { 
                        text-align: center; 
			font-size: 18px;
                        }
			
                      a {
                        text-decoration: none; color: #10409C; 
		        font-size: 12px;
                        }


</style>


<script type="text/javascript">

	function ajaxFunction(url)
	 {
	    var xmlHttp;
	    try
	      {xmlHttp=new XMLHttpRequest();}
	       catch (e)
	 	 {    try
		    {    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");    }
		  catch (e)
		    {    try
		      {      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");      }
		    catch (e)
		      {      alert("Your browser does not support AJAX!");      return false;      }    }  }
        xmlHttp.open("GET", url, 0); 
        xmlHttp.send(""); 
        document.getElementById("content").innerHTML = rewriteLinks(xmlHttp.responseText); 
        document.getElementById("addrform").style.display = "none";
        var xmlHttp = null; 
       }


    function rewriteLinks(text){
    var find = /<a href="(\S{2,})">/ig;  //Any URL;

    var arr = text.match(find);

    for (i=0;i<arr.length; i++) {

     if (arr[i].indexOf("?view") > -1) {
       text = text.replace(arr[i], "<a href=\"#\" onclick=\"ajaxFunction\('" + stripTags(arr[i]) + "'\)\">"    );	
      }

    }
//    alert(text);
    return text;    
}


  function stripTags(text){ 
  var re= /<a href="(\S{2,})">/g; 
  text = text.replace(re,"$1"); 
  return text;
  } 


</script>

<body>

<div id="addrform"><font size="2"><b>Enter the URL to browse:</b></font>
<input type="text" id="address" name="address" size="30" value="http://localhost:8080/portal/rest/maven2">&nbsp;<input type="button" value="Browse" onclick="ajaxFunction(document.getElementById('address').value + '?view=true&gadget=true');">
</div>

<div id="content" class="Content">
</div>

</body>
	]]>
	</Content>
</Module> 

